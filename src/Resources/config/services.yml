services:

    tenolo_entity.listener.entity:
        class: Tenolo\Bundle\EntityBundle\EventListener\EntityListener
        tags:
            - { name: doctrine.event_listener, event: prePersist }
            - { name: doctrine.event_listener, event: preUpdate }

    tenolo_entity.listener.dna_annotation:
        class: Tenolo\Bundle\EntityBundle\EventListener\DnaAnnotationListener
        arguments: 
            - "@annotation_reader"
            - "@tenolo_entity.services.entity_dna_verifier"
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelController }

    tenolo_entity.services.entity_dna_verifier:
        class: Tenolo\Bundle\EntityBundle\Services\EntityDnaVerifier
        arguments:
            - '@request_stack'
            - '@doctrine'
